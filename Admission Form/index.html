<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Philippine College of Criminology - Student Admission Application">
    <title>PCCR - Student Admission Application | Philippine College of Criminology</title>
    <link rel="icon" href="https://cutover.pccr.edu.ph/files/pccr-logo.png" type="image/png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'pccr-red': '#7b0200',
                        'pccr-red-dark': '#5a0100',
                        'pccr-gold': '#fcb31c',
                        'pccr-gold-dark': '#e09a00',
                    }
                }
            }
        }
    </script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body class="bg-gray-50 font-['Inter']">
    
    <div id="loadingScreen" class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-gradient-to-br from-pccr-red to-pccr-red-dark">
        <img src="https://cutover.pccr.edu.ph/files/pccr-logo.png" alt="PCCR Logo" class="w-24 h-24 mb-6 animate-bounce">
        <div class="text-white text-xl font-semibold mb-4">Philippine College of Criminology</div>
        <div class="loader"></div>
        <p class="text-white/80 mt-4 text-sm">Loading admission form...</p>
    </div>

    <div class="bg-decoration">
        <div class="accent-line line-1"></div>
        <div class="accent-line line-2"></div>
        <div class="accent-line line-3"></div>
        <div class="particles">
            <span class="particle" style="top: 10%; left: 15%; animation-delay: 0s;"></span>
            <span class="particle" style="top: 25%; left: 75%; animation-delay: -2s;"></span>
            <span class="particle" style="top: 40%; left: 30%; animation-delay: -4s;"></span>
            <span class="particle" style="top: 60%; left: 80%; animation-delay: -6s;"></span>
            <span class="particle" style="top: 75%; left: 20%; animation-delay: -8s;"></span>
            <span class="particle" style="top: 20%; left: 90%; animation-delay: -3s;"></span>
            <span class="particle" style="top: 85%; left: 60%; animation-delay: -5s;"></span>
            <span class="particle" style="top: 35%; left: 5%; animation-delay: -7s;"></span>
            <span class="particle gold" style="top: 15%; left: 50%; animation-delay: -1s;"></span>
            <span class="particle gold" style="top: 55%; left: 10%; animation-delay: -9s;"></span>
            <span class="particle gold" style="top: 70%; left: 85%; animation-delay: -4.5s;"></span>
            <span class="particle gold" style="top: 90%; left: 40%; animation-delay: -6.5s;"></span>
        </div>
    </div>
    
    <div class="min-h-screen py-8 px-4 sm:px-6 lg:px-8">
        <div class="max-w-4xl mx-auto">
            
            <div class="bg-gradient-to-r from-pccr-red to-pccr-red-dark rounded-t-2xl shadow-2xl overflow-hidden">
                <div class="p-8 text-center relative">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-pccr-gold/10 rounded-full -mr-16 -mt-16"></div>
                    <div class="absolute bottom-0 left-0 w-24 h-24 bg-pccr-gold/10 rounded-full -ml-12 -mb-12"></div>
                    
                    <div class="relative z-10">
                        <img src="https://cutover.pccr.edu.ph/files/pccr-logo.png" alt="PCCR Logo" class="w-20 h-20 mx-auto mb-4 drop-shadow-2xl">
                        <h1 class="text-3xl md:text-4xl font-bold text-white mb-2 font-['Poppins']">Student Admission Application</h1>
                        <p class="text-white/90 text-lg mb-1">Philippine College of Criminology</p>
                        <p class="text-pccr-gold font-semibold text-sm tracking-wider">PRO BONO PUBLICO ET PATRIA</p>
                        <p class="text-white/80 text-sm mt-2">Academic Year 2025-2026</p>
                    </div>
                </div>
                
                <div class="bg-white/10 backdrop-blur-sm px-8 py-4">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-white text-sm font-semibold flex items-center gap-2">
                            <i class="fas fa-tasks"></i> Application Progress
                        </span>
                        <div class="text-right">
                            <span id="progressPercent" class="text-pccr-gold font-bold text-sm">20%</span>
                            
                        </div>
                    </div>
                    <div class="h-3 bg-white/20 rounded-full overflow-hidden">
                        <div id="progressBar" class="h-full bg-gradient-to-r from-pccr-gold to-yellow-300 rounded-full transition-all duration-500 ease-out" style="width: 20%"></div>
                    </div>
                    
                    <div class="flex justify-between mt-4 gap-2">
                        <div id="stepLabel1" class="step-label active flex-1 text-center">
                            <div class="text-pccr-gold text-lg mb-1"><i class="fas fa-clipboard-list"></i></div>
                            <div class="text-xs font-semibold">Admission</div>
                        </div>
                        <div id="stepLabel2" class="step-label flex-1 text-center">
                            <div class="text-white/50 text-lg mb-1"><i class="fas fa-user"></i></div>
                            <div class="text-xs font-semibold">Personal</div>
                        </div>
                        <div id="stepLabel3" class="step-label flex-1 text-center">
                            <div class="text-white/50 text-lg mb-1"><i class="fas fa-graduation-cap"></i></div>
                            <div class="text-xs font-semibold">Education</div>
                        </div>
                        <div id="stepLabel4" class="step-label flex-1 text-center">
                            <div class="text-white/50 text-lg mb-1"><i class="fas fa-file-upload"></i></div>
                            <div class="text-xs font-semibold">Documents</div>
                        </div>
                        <div id="stepLabel5" class="step-label flex-1 text-center">
                            <div class="text-white/50 text-lg mb-1"><i class="fas fa-check-circle"></i></div>
                            <div class="text-xs font-semibold">Review</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-b-2xl shadow-2xl">
                <form id="admissionForm" class="p-8">
                    
                    <div id="step1" class="form-step active">
                        <div class="mb-6">
                            <h2 class="text-2xl font-bold text-gray-800 mb-2 flex items-center gap-3">
                                <span class="w-10 h-10 bg-gradient-to-br from-pccr-red to-pccr-red-dark text-white rounded-full flex items-center justify-center">
                                    <i class="fas fa-rocket text-sm"></i>
                                </span>
                                Let's Get Started
                            </h2>
                            <p class="text-gray-600 ml-13">Begin your journey to becoming a Batang 641. Provide your admission details below.</p>
                        </div>

                        <div class="space-y-6">
                            <div class="grid md:grid-cols-2 gap-6">
                                <div class="form-group">
                                    <label class="form-label required-field">Student Category</label>
                                    <select name="student_category" required class="form-input">
                                        <option value="">Select category</option>
                                        <option value="New Student">New Student</option>
                                        <option value="Transferee">Transferee</option>
                                        <option value="Second Courser">Second Courser</option>
                                    </select>
                                    <div class="error-message"></div>
                                </div>
                            
                                <div class="form-group">
                                <label class="form-label required-field">Program Applied For</label>
                                <select name="program" required class="form-input">
                                    <option value="">Select Program</option>
                                    
                                    <optgroup label="Graduate School">
                                        <option value="Master of Science in Criminal Justice Education - Academic Track">Master of Science in Criminal Justice Education</option>
                                        
                                        <option value="Doctor of Criminal Justice Education - Professional Track">Doctor of Criminal Justice Education</option>
                                    </optgroup>
                            
                                    <optgroup label="College">
                                        <option value="Bachelor of Science in Criminology">Bachelor of Science in Criminology</option>
                                        
                                        <option value="Bachelor of Science in Industrial Security Management">Bachelor of Science in Industrial Security Management</option>
                                        
                                        <option value="Bachelor of Forensic Science">Bachelor of Forensic Science</option>
                                    </optgroup>
                            
                                    <optgroup label="Senior High School">
                                        <option value="General Academic">General Academic</option>
                                    </optgroup>
                                </select>
                                <div class="error-message"></div>
                            </div>
                            </div>
                            
                
                            
                        </div>

                        <div class="flex justify-end mt-8">
                            <button type="button" onclick="nextStep(2)" class="btn-primary">
                                Continue <i class="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </div>

                    <div id="step2" class="form-step">
                        <div class="mb-6">
                            <h2 class="text-2xl font-bold text-gray-800 mb-2 flex items-center gap-3">
                                <span class="w-10 h-10 bg-gradient-to-br from-pccr-red to-pccr-red-dark text-white rounded-full flex items-center justify-center">
                                    <i class="fas fa-user-circle text-sm"></i>
                                </span>
                                Personal Information
                            </h2>
                            <p class="text-gray-600 ml-13">Tell us about yourself so we can get to know you better.</p>
                        </div>

                        <div class="space-y-6">
                            <div class="grid md:grid-cols-3 gap-6">
                                <div class="form-group">
                                    <label class="form-label required-field">First Name</label>
                                    <input type="text" name="first_name" required class="form-input" placeholder="Juan">
                                    <div class="error-message"></div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label">Middle Name</label>
                                    <input type="text" name="middle_name" class="form-input" placeholder="Santos">
                                    <div class="error-message"></div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label required-field">Last Name</label>
                                    <input type="text" name="last_name" required class="form-input" placeholder="Dela Cruz">
                                    <div class="error-message"></div>
                                </div>
                                
                                <div class="form-group">
                                    <label class="form-label">Suffix</label>
                                    <select name="suffix" class="form-input">
                                        <option value="">None</option>
                                        <option value="Jr.">Jr.</option>
                                        <option value="Sr.">Sr.</option>
                                        <option value="II">II</option>
                                        <option value="III">III</option>
                                        <option value="IV">IV</option>
                                        <option value="V">V</option>
                                    </select>
                                </div>
                                
                            </div>

                            <div class="grid md:grid-cols-2 gap-6">
                                <div class="form-group">
                                    <label class="form-label required-field">Date of Birth</label>
                                    <input type="date" name="date_of_birth" required class="form-input">
                                    <div class="error-message"></div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label required-field">Gender</label>
                                    <select name="gender" required class="form-input">
                                        <option value="Male">Male</option>
                                        <option value="Female">Female</option>
                                    </select>
                                    <div class="error-message"></div>
                                </div>
                            </div>

                            <div class="grid md:grid-cols-2 gap-6">
                                <div class="form-group">
                                    <label class="form-label required-field">Email Address</label>
                                    <input type="email" name="student_email_id" required class="form-input" placeholder="juan.delacruz@email.com">
                                    <small class="text-gray-500 text-xs mt-1 flex items-center gap-1">
                                        <i class="fas fa-info-circle text-pccr-gold"></i> We'll send important updates here
                                    </small>
                                    <div class="error-message"></div>
                                </div>

                                <div class="form-group">
                                    <label class="form-label required-field">Mobile Number</label>
                                    <input type="text" name="student_mobile_number" required class="form-input" placeholder="09XXXXXXXXX" maxlength="11" inputmode="numeric" pattern="[0-9]{11}" title="Please enter exactly 11 digits">
                                    <small class="text-gray-500 text-xs mt-1 flex items-center gap-1">
                                        <i class="fas fa-phone text-pccr-gold"></i> Format: 09XXXXXXXXX (11 digits)
                                    </small>
                                    <div class="error-message"></div>
                                </div>
                            </div>
                            
                            <div class="border-t border-gray-100 pt-8 mt-8">
                                <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center gap-3">
                                    <span class="w-8 h-8 bg-gray-100 text-pccr-red rounded-full flex items-center justify-center">
                                        <i class="fas fa-users text-sm"></i>
                                    </span>
                                    Parents / Guardian Information
                                </h3>
                                
                                <div class="space-y-6">
                                    <div class="form-group max-w-md">
                                        <label class="form-label required-field">Are you living with your parents?</label>
                                        <select name="living_with_parents" class="form-input">
                                            <option value="Yes">Yes</option>
                                            <option value="No">No</option>
                                        </select>
                                    </div>
                            
                                    <div class="bg-gray-50/50 p-4 rounded-lg border border-gray-100">
                                        <h4 class="text-sm font-bold text-gray-600 mb-4 uppercase tracking-wider">Father's Information</h4>
                                        <div class="grid md:grid-cols-4 gap-4">
                                            <div class="form-group">
                                                <label class="form-label required-field">Last Name</label>
                                                <input type="text" name="father_last_name" required class="form-input" placeholder="Last Name">
                                                <div class="error-message"></div>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label required-field">First Name</label>
                                                <input type="text" name="father_first_name" required class="form-input" placeholder="First Name">
                                                <div class="error-message"></div>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Middle Name</label>
                                                <input type="text" name="father_middle_name" class="form-input" placeholder="Middle Name">
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Suffix</label>
                                                <select name="suffix" class="form-input">
                                                    <option value="">None</option>
                                                    <option value="Jr.">Jr.</option>
                                                    <option value="Sr.">Sr.</option>
                                                    <option value="II">II</option>
                                                    <option value="III">III</option>
                                                    <option value="IV">IV</option>
                                                    <option value="V">V</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                            
                                    <div class="bg-gray-50/50 p-4 rounded-lg border border-gray-100">
                                        <h4 class="text-sm font-bold text-gray-600 mb-4 uppercase tracking-wider">Mother's Information</h4>
                                        <div class="grid md:grid-cols-3 gap-4">
                                            <div class="form-group">
                                                <label class="form-label required-field">Last Name</label>
                                                <input type="text" name="mother_last_name" required class="form-input" placeholder="Maiden Last Name">
                                                <div class="error-message"></div>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label required-field">First Name</label>
                                                <input type="text" name="mother_first_name" required class="form-input" placeholder="First Name">
                                                <div class="error-message"></div>
                                            </div>
                                            <div class="form-group">
                                                <label class="form-label">Middle Name</label>
                                                <input type="text" name="mother_middle_name" class="form-input" placeholder="Maiden Middle Name">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="border-t border-gray-100 pt-8 mt-8">
                                <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center gap-3">
                                    <span class="w-8 h-8 bg-gray-100 text-pccr-red rounded-full flex items-center justify-center">
                                        <i class="fas fa-phone-alt text-sm"></i>
                                    </span>
                                    Emergency Contact
                                </h3>
                                
                                <div class="grid md:grid-cols-3 gap-6">
                                    <div class="form-group">
                                        <label class="form-label required-field">Full Name of Emergency Contact</label>
                                        <input type="text" name="emergency_contact_name" required class="form-input" placeholder="Full Name">
                                        <div class="error-message"></div>
                                    </div>
                                  <div class="form-group">
                                        <label class="form-label required-field">Relationship</label>
                                        <select name="emergency_relationship" required class="form-input">
                                            <option value="">Select Relationship</option>
                                            <option value="Father">Father</option>
                                            <option value="Mother">Mother</option>
                                            <option value="Guardian">Guardian</option>
                                            <option value="Brother">Brother</option>
                                            <option value="Sister">Sister</option>
                                            <option value="Spouse">Spouse</option>
                                            <option value="Relative">Relative</option>
                                            <option value="Friend">Friend</option>
                                            <option value="Other">Other</option>
                                        </select>
                                        <div class="error-message"></div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label required-field">Contact Number</label>
                                        <input type="text" name="emergency_contact_number" required class="form-input" placeholder="09XXXXXXXXX" maxlength="11" inputmode="numeric" pattern="[0-9]{11}" title="Please enter exactly 11 digits">
                                        <small class="text-gray-500 text-xs mt-1 flex items-center gap-1">
                                            <i class="fas fa-phone text-pccr-gold"></i> Format: 09XXXXXXXXX (11 digits)
                                        </small>
                                        <div class="error-message"></div>
                                    </div>
                                </div>
                            </div>

                           <div class="border-t border-gray-100 pt-8 mt-8">
                                <h3 class="text-xl font-bold text-gray-800 mb-6 flex items-center gap-3">
                                    <span class="w-8 h-8 bg-gray-100 text-pccr-red rounded-full flex items-center justify-center">
                                        <i class="fas fa-home text-sm"></i>
                                    </span>
                                    Home Address
                                </h3>
                            
                                
                                
                                <div class="space-y-6">
                                    <div class="grid md:grid-cols-1 gap-6">
                                        <div class="form-group">
                                            <label class="form-label required-field">Address Line 1</label>
                                            <input type="text" name="address_line_1" class="form-input" placeholder="House No., Street Name, Subdivision">
                                        </div>
                                    </div>
                                    
                                    <div class="bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded-r">
                                        <div class="flex items-start">
                                            <div class="flex-shrink-0">
                                                <i class="fas fa-info-circle text-red-500 mt-0.5"></i>
                                            </div>
                                            <div class="ml-3">
                                                <h3 class="text-sm font-medium text-red-800">Please select in order:</h3>
                                                <div class="mt-2 text-sm text-red-700">
                                                    <ol class="list-decimal list-inside space-y-1">
                                                        <li>Select <strong>Region</strong> first</li>
                                                        <li>Then <strong>Province</strong> (automatically loads)</li>
                                                        <li>Then <strong>City / Municipality</strong></li>
                                                        <li>Finally, select your <strong>Barangay</strong></li>
                                                    </ol>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="grid md:grid-cols-2 gap-6">
                                        <div class="form-group">
                                            <label class="form-label required-field">Region</label>
                                            <select name="region" id="regionSelect" required class="form-input">
                                                <option value="">Select Region</option>
                                            </select>
                                            <div class="error-message"></div>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label required-field">Province</label>
                                            <select name="province" id="provinceSelect" required class="form-input" disabled>
                                                <option value="">Select Province</option>
                                            </select>
                                            <div class="error-message"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="grid md:grid-cols-2 gap-6">
                                        <div class="form-group">
                                            <label class="form-label required-field">City / Municipality</label>
                                            <select name="city" id="citySelect" required class="form-input" disabled>
                                                <option value="">Select City</option>
                                            </select>
                                            <div class="error-message"></div>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label required-field">Barangay</label>
                                            <select name="barangay" id="barangaySelect" required class="form-input" disabled>
                                                <option value="">Select Barangay</option>
                                            </select>
                                            <div class="error-message"></div>
                                        </div>
                                    </div>
                                    
                                    <input type="hidden" name="region_text" id="regionText">
                                    <input type="hidden" name="province_text" id="provinceText">
                                    <input type="hidden" name="city_text" id="cityText">
                                    <input type="hidden" name="barangay_text" id="barangayText">

                                    <div class="grid md:grid-cols-2 gap-6">
                                        <div class="form-group">
                                            <label class="form-label required-field">Zip Code / Pincode</label>
                                            <input type="text" name="pincode" required class="form-input" placeholder="Zip Code" maxlength="4" inputmode="numeric" pattern="[0-9]{4}" title="Please enter exactly 4 digits">
                                            <small class="text-gray-500 text-xs mt-1 flex items-center gap-1">
                                                <i class="fas fa-map-pin text-pccr-gold"></i> Format: 4 digits
                                            </small>
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">Home Phone Number</label>
                                            <input type="text" name="home_phone_number" class="form-input" placeholder="Landline Number" maxlength="8" inputmode="numeric" pattern="[0-9]{8}" title="Please enter exactly 8 digits">
                                            <small class="text-gray-500 text-xs mt-1 flex items-center gap-1">
                                                <i class="fas fa-phone text-pccr-gold"></i> Format: 8 digits
                                            </small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flex justify-between mt-8">
                            <button type="button" onclick="prevStep(1)" class="btn-secondary">
                                <i class="fas fa-arrow-left mr-2"></i> Back
                            </button>
                            <button type="button" onclick="nextStep(3)" class="btn-primary">
                                Continue <i class="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </div>

                    <div id="step3" class="form-step">
                        <div class="mb-6">
                            <h2 class="text-2xl font-bold text-gray-800 mb-2 flex items-center gap-3">
                                <span class="w-10 h-10 bg-gradient-to-br from-pccr-red to-pccr-red-dark text-white rounded-full flex items-center justify-center">
                                    <i class="fas fa-graduation-cap text-sm"></i>
                                </span>
                                Educational Background
                            </h2>
                            <p class="text-gray-600 ml-13">Add schools you have previously attended. (Optional)</p>
                        </div>

                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6 ml-13">
                            <label class="custom-checkbox w-full justify-between bg-transparent border-0 p-0">
                                <div class="flex items-center">
                                    <input type="checkbox" id="alsCheckbox" name="als_passer" class="checkbox-input" onchange="toggleAls(this)">
                                    <span class="text-gray-800 font-bold">I am an Alternative Learning System (ALS) Passer</span>
                                </div>
                                <span class="text-xs text-gray-500 italic hidden md:block">Check this to skip school details</span>
                            </label>
                        </div>

                        <div id="eduContainer" class="space-y-6">
                            
                            <div id="schoolList" class="space-y-3">
                            </div>

                            <div class="bg-gray-50 p-5 rounded-lg border border-gray-200" id="addSchoolForm">
                                <h4 class="font-bold text-gray-800 mb-4 text-sm uppercase">Add School</h4>
                                <div class="grid md:grid-cols-2 gap-4 mb-4">
                                    <div>
                                        <label class="form-label text-xs">Level</label>
                                        <select id="tempLevel" class="form-input text-sm">
                                            <option value="Grade School">Grade School</option>
                                            <option value="Junior High School">Junior High School</option>
                                            <option value="Senior High School">Senior High School</option>
                                            <option value="College">College</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="form-label text-xs">School Name</label>
                                        <input type="text" id="tempSchoolName" class="form-input text-sm" placeholder="Enter school name">
                                    </div>
                                    <div>
                                        <label class="form-label text-xs">Year Started</label>
                                        <input type="number" id="tempYearStart" class="form-input text-sm" placeholder="YYYY">
                                    </div>
                                    <div>
                                        <label class="form-label text-xs">Year Ended</label>
                                        <input type="number" id="tempYearEnd" class="form-input text-sm" placeholder="YYYY">
                                    </div>
                                    <div class="md:col-span-2">
                                        <label class="form-label text-xs">Address</label>
                                        <input type="text" id="tempAddress" class="form-input text-sm" placeholder="City / Province">
                                    </div>
                                </div>
                                <button type="button" onclick="addSchool()" class="bg-gray-800 text-white px-4 py-2 rounded text-sm hover:bg-black transition-colors">
                                    <i class="fas fa-plus mr-1"></i> Add to List
                                </button>
                            </div>
                        </div>

                        <div class="flex justify-between mt-8">
                            <button type="button" onclick="prevStep(2)" class="btn-secondary">
                                <i class="fas fa-arrow-left mr-2"></i> Back
                            </button>
                            <button type="button" onclick="nextStep(4)" class="btn-primary">
                                Continue <i class="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </div>

                    <div id="step4" class="form-step">
                        <div class="mb-6">
                            <h2 class="text-2xl font-bold text-gray-800 mb-2 flex items-center gap-3">
                                <span class="w-10 h-10 bg-gradient-to-br from-pccr-red to-pccr-red-dark text-white rounded-full flex items-center justify-center">
                                    <i class="fas fa-file-upload text-sm"></i>
                                </span>
                                Submit Required Documents
                            </h2>
                            <p class="text-gray-600 ml-13">Upload the following documents. Accepted formats: PDF, JPG, PNG.</p>
                        </div>

                        <div class="space-y-6">
                            <div class="form-group">
                                <label class="form-label required-field">Form 138 (Grade 12 Report Card)</label>
                                <input type="file" name="form_138" accept=".pdf,.jpg,.jpeg,.png" class="form-input file-input" data-docfield="form_138">
                                <div class="error-message"></div>
                            </div>
                            <div class="form-group">
                                <label class="form-label required-field">2x2 Picture</label>
                                <small class="text-gray-500 text-xs block mt-1 mb-2">White background, with name tag, and in formal attire.</small>
                                <input type="file" name="photo_2x2" accept=".jpg,.jpeg,.png" class="form-input file-input" data-docfield="photo_2x2">
                                <div class="error-message"></div>
                            </div>
                            <div class="form-group">
                                <label class="form-label required-field">Previous School ID or Government-Issued ID</label>
                                <input type="file" name="government_id" accept=".pdf,.jpg,.jpeg,.png" class="form-input file-input" data-docfield="government_id">
                                <div class="error-message"></div>
                            </div>
                            <div class="form-group">
                                <label class="form-label required-field">Birth Certificate from Philippine Statistics Authority (PSA)</label>
                                <input type="file" name="birth_certificate" accept=".pdf,.jpg,.jpeg,.png" class="form-input file-input" data-docfield="birth_certificate">
                                <div class="error-message"></div>
                            </div>
                            <div class="form-group">
                                <label class="form-label required-field">Certificate of Good Moral Character</label>
                                <input type="file" name="good_moral" accept=".pdf,.jpg,.jpeg,.png" class="form-input file-input" data-docfield="good_moral">
                                <div class="error-message"></div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Form 137 (Transcript of Records) — If available</label>
                                <input type="file" name="form_137" accept=".pdf,.jpg,.jpeg,.png" class="form-input file-input" data-docfield="form_137">
                                <div class="error-message"></div>
                            </div>
                            <div id="honorableDismissalGroup" class="form-group" style="display: none;">
                                <label class="form-label required-field">Certificate of Honorable Dismissal (College Transferees)</label>
                                <input type="file" name="honorable_dismissal" accept=".pdf,.jpg,.jpeg,.png" class="form-input file-input" data-docfield="honorable_dismissal">
                                <div class="error-message"></div>
                            </div>
                        </div>

                        <div class="flex justify-between mt-8">
                            <button type="button" onclick="prevStep(3)" class="btn-secondary">
                                <i class="fas fa-arrow-left mr-2"></i> Back
                            </button>
                            <button type="button" onclick="nextStep(5)" class="btn-primary">
                                Continue <i class="fas fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </div>

                    <div id="step5" class="form-step">
                        <div class="text-center mb-8">
                            <div class="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-green-100 to-green-50 rounded-full mb-4">
                                <i class="fas fa-file-contract text-green-600 text-3xl"></i>
                            </div>
                            <h2 class="text-2xl font-bold text-gray-800 mb-2">Review Your Application</h2>
                            <p class="text-gray-600">Please verify all information before submitting.</p>
                        </div>

                        <div class="bg-gray-50 rounded-xl p-6 mb-6">
                            <table id="summaryTable" class="w-full">
                            </table>
                            
                            <div id="summarySchools" class="mt-4 pt-4 border-t border-gray-200">
                                <h5 class="font-bold text-gray-700 mb-2 text-sm">Educational History</h5>
                                <div id="summarySchoolList" class="text-sm text-gray-600 italic">No schools added.</div>
                            </div>
                            <div id="summaryDocuments" class="mt-4 pt-4 border-t border-gray-200">
                                <h5 class="font-bold text-gray-700 mb-2 text-sm">Documents</h5>
                                <div id="summaryDocumentList" class="text-sm text-gray-600 italic">—</div>
                            </div>
                        </div>

                        <div class="bg-yellow-50 border-l-4 border-pccr-gold p-4 rounded mb-6">
                            <div class="flex items-start gap-3">
                                <i class="fas fa-exclamation-triangle text-pccr-gold text-lg mt-0.5"></i>
                                <div>
                                    <p class="text-gray-700 text-sm font-medium">Important Notice</p>
                                    <p class="text-gray-600 text-sm mt-1">By submitting this application, you confirm that all information provided is accurate and complete to the best of your knowledge.</p>
                                </div>
                            </div>
                        </div>

                        <div class="flex justify-between mt-8">
                            <button type="button" onclick="prevStep(4)" class="btn-secondary">
                                <i class="fas fa-arrow-left mr-2"></i> Back
                            </button>
                            <button type="button" onclick="submitForm()" id="submitBtn" class="btn-success">
                                <i class="fas fa-paper-plane mr-2"></i> Submit Application
                            </button>
                        </div>
                    </div>

                </form>

                <div id="successScreen" class="hidden py-8 px-4 sm:px-6 lg:px-8">
                    <div id="pdf-content" class="max-w-3xl mx-auto bg-white p-8 rounded-lg shadow-sm">
                        
                        <div class="text-center mb-8">
                            <img src="https://cutover.pccr.edu.ph/files/pccr-logo.png" alt="PCCR Logo" class="w-24 h-24 mx-auto mb-4">
                            <h2 class="text-2xl font-bold text-pccr-red font-['Poppins']">Philippine College of Criminology</h2>
                            <p class="text-pccr-gold font-semibold text-sm tracking-wider mt-1">PRO BONO PUBLICO ET PATRIA</p>
                            <h3 class="text-xl font-bold text-gray-800 mt-6">Student Admission Application</h3>
                        </div>
                
                        <div class="text-center mb-8">
                            <h3 class="text-xl font-bold text-gray-800 mb-2">Hi <span id="successName" class="text-pccr-red">Student</span>!</h3>
                            <p class="text-gray-600 text-sm mb-6 max-w-2xl mx-auto">
                                This confirms that you have successfully submitted your pre-application form for PCCR Criminology Education.
                            </p>
                            
                            <div class="bg-yellow-50 border-2 border-dashed border-pccr-gold rounded-lg p-4 inline-block">
                                <p class="text-xs text-gray-500 uppercase tracking-wide font-semibold mb-1">Your Reference Number</p>
                                <p id="successRefNo" class="text-3xl font-bold text-pccr-red tracking-wider font-mono">PENDING</p>
                            </div>
                        </div>
                
                        <div class="mb-8 border-t border-gray-200 pt-6">
                            <h4 class="font-bold text-gray-800 mb-4 flex items-center gap-2">
                                <i class="fas fa-list-check text-pccr-gold"></i> Requirements to Submit
                            </h4>
                            <ul class="space-y-2 text-sm text-gray-700 pl-4">
                                <li class="flex items-start gap-2"><i class="fas fa-check-circle text-green-500 mt-0.5"></i> Form 138 (Grade 12 Report Card)</li>
                                <li class="flex items-start gap-2"><i class="fas fa-check-circle text-green-500 mt-0.5"></i> 2x2 Picture (White background, with name tag)</li>
                                <li class="flex items-start gap-2"><i class="fas fa-check-circle text-green-500 mt-0.5"></i> PSA Birth Certificate (Original & Photocopy)</li>
                                <li class="flex items-start gap-2"><i class="fas fa-check-circle text-green-500 mt-0.5"></i> Certificate of Good Moral Character</li>
                                <li class="flex items-start gap-2"><i class="fas fa-check-circle text-green-500 mt-0.5"></i> SF10 / Form 137 (Copy of Grades)</li>
                            </ul>
                        </div>
                
                        <div class="mb-8 border-t border-gray-200 pt-6">
                            <h4 class="font-bold text-gray-800 mb-4 text-sm uppercase">Applicant Details</h4>
                            <div class="grid grid-cols-2 gap-y-4 gap-x-8 text-sm">
                        <div>
                            <p class="text-gray-500 text-xs uppercase">Applicant Name</p>
                            <p id="summaryName" class="font-bold text-gray-900">-</p>
                        </div>
                        
                        <div>
                            <p class="text-gray-500 text-xs uppercase">Student Type</p>
                            <p id="summaryType" class="font-bold text-gray-900">-</p>
                        </div>
                    
                    
                        <div>
                            <p class="text-gray-500 text-xs uppercase">Program</p>
                            <p id="summaryProgram" class="font-bold text-gray-900">-</p>
                        </div>
                    
                    
                        <div>
                            <p class="text-gray-500 text-xs uppercase">Contact Number</p>
                            <p id="summaryMobile" class="font-bold text-gray-900">-</p>
                        </div>
                    
                        <div class="col-span-2">
                            <p class="text-gray-500 text-xs uppercase">Email Address</p>
                            <p id="summaryEmail" class="font-bold text-gray-900">-</p>
                        </div>
                    </div>
                        </div>
                    </div> <div class="text-center space-y-4 mt-8">
                        <button type="button" onclick="downloadPDF()" class="btn-primary inline-flex items-center justify-center bg-pccr-red hover:bg-pccr-red-dark">
                            <i class="fas fa-file-pdf mr-2"></i> Download Application Form
                        </button>
                        <br>
                        <a href="/" class="text-sm text-gray-600 hover:text-pccr-red font-semibold">
                            <i class="fas fa-home mr-1"></i> Return to Homepage
                        </a>
                    </div>
                </div>

                <div class="border-t border-gray-200 px-8 py-6 bg-gray-50 rounded-b-2xl">
                    <div class="text-center">
                        <p class="text-gray-500 text-xs">
                            <i class="fas fa-shield-alt text-green-600 mr-1"></i>
                            © Philippine College of Criminology. All Rights Reserved.
                        </p>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <button id="scrollTopBtn" class="fixed bottom-6 right-6 w-12 h-12 bg-gradient-to-br from-pccr-red to-pccr-red-dark text-white rounded-full shadow-lg hover:shadow-xl transform hover:scale-110 transition-all duration-300 hidden z-40">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="script.js"></script>
    
    <script>
        let addedSchools = [];

        // Mobile Number Validation - Only 11 digits
        const mobileInput = document.querySelector('input[name="student_mobile_number"]');
        if (mobileInput) {
            mobileInput.addEventListener('input', function(e) {
                // Remove non-numeric characters
                this.value = this.value.replace(/[^0-9]/g, '');
                // Limit to 11 digits
                if (this.value.length > 11) {
                    this.value = this.value.slice(0, 11);
                }
            });
        }

        // Emergency Contact Number Validation - Only 11 digits
        const emergencyInput = document.querySelector('input[name="emergency_contact_number"]');
        if (emergencyInput) {
            emergencyInput.addEventListener('input', function(e) {
                // Remove non-numeric characters
                this.value = this.value.replace(/[^0-9]/g, '');
                // Limit to 11 digits
                if (this.value.length > 11) {
                    this.value = this.value.slice(0, 11);
                }
            });
        }

        // Home Phone Number Validation - Only 8 digits
        const homePhoneInput = document.querySelector('input[name="home_phone_number"]');
        if (homePhoneInput) {
            homePhoneInput.addEventListener('input', function(e) {
                // Remove non-numeric characters
                this.value = this.value.replace(/[^0-9]/g, '');
                // Limit to 8 digits
                if (this.value.length > 8) {
                    this.value = this.value.slice(0, 8);
                }
            });
        }

        // Zip Code / Pincode Validation - Only 4 digits
        const pincodeInput = document.querySelector('input[name="pincode"]');
        if (pincodeInput) {
            pincodeInput.addEventListener('input', function(e) {
                // Remove non-numeric characters
                this.value = this.value.replace(/[^0-9]/g, '');
                // Limit to 4 digits
                if (this.value.length > 4) {
                    this.value = this.value.slice(0, 4);
                }
            });
        }

        // ALS Toggle
        function toggleAls(checkbox) {
            const container = document.getElementById('eduContainer');
            if(checkbox.checked) {
                $(container).slideUp();
            } else {
                $(container).slideDown();
            }
        }

          // addSchool

        function addSchool() {
            // 1. Get Values
            const level = $('#tempLevel').val();
            const name = $('#tempSchoolName').val().trim();
            const start = $('#tempYearStart').val();
            const end = $('#tempYearEnd').val();
            const addr = $('#tempAddress').val().trim();
            
            const currentYear = new Date().getFullYear();
            const minYear = 1950; // <--- NEW: Define the oldest allowed year
        
            // 2. Validate: Check for Empty Fields
            if (!name || !start || !end || !addr) {
                if(typeof frappe !== 'undefined') {
                    frappe.msgprint({title: 'Missing Information', message: 'Please fill in <b>all fields</b>.', indicator: 'red'});
                } else {
                    alert("Please fill in all fields (School Name, Years, and Address) before adding.");
                }
                return; 
            }
        
            // 3. Validate: Numeric format
            if (start.length !== 4 || end.length !== 4) {
                alert("Please enter a valid 4-digit year (e.g., 2018).");
                return;
            }
        
            // 4. Validate: Ancient Year Check (NEW)
            if (parseInt(start) < minYear || parseInt(end) < minYear) {
                alert(`Invalid Year: Years cannot be earlier than ${minYear}.`);
                return;
            }
        
            // 5. Validate: Future Year Check
            if (parseInt(start) > currentYear) {
                alert("Year Started cannot be in the future.");
                return;
            }
        
            // 6. Validate: Date Logic (End < Start)
            if (parseInt(end) < parseInt(start)) {
                alert(`Invalid Date Range: Year Ended (${end}) cannot be before Year Started (${start}).`);
                return;
            }
        
            // 7. Success: Add to List
            const schoolObj = { level, name, start, end, addr };
            addedSchools.push(schoolObj);
            renderSchoolList();
        
            // 8. Clear inputs
            $('#tempSchoolName').val('');
            $('#tempYearStart').val('');
            $('#tempYearEnd').val('');
            $('#tempAddress').val('');
            
            // Optional: Toast notification
            if(typeof frappe !== 'undefined') {
                frappe.show_alert({message: 'School added successfully', indicator: 'green'});
            }
        }

        function renderSchoolList() {
            const listContainer = $('#schoolList');
            listContainer.empty();

            addedSchools.forEach((s, index) => {
                const item = `
                    <div class="flex items-center justify-between bg-white p-3 border border-gray-200 rounded shadow-sm">
                        <div>
                            <span class="text-xs font-bold text-pccr-gold uppercase tracking-wide block">${s.level}</span>
                            <span class="font-bold text-gray-800">${s.name}</span>
                            <span class="text-xs text-gray-500 block">${s.start} - ${s.end} | ${s.addr}</span>
                        </div>
                        <button onclick="removeSchool(${index})" class="text-red-500 hover:text-red-700 text-sm"><i class="fas fa-trash"></i></button>
                    </div>
                `;
                listContainer.append(item);
            });
        }

        function removeSchool(index) {
            addedSchools.splice(index, 1);
            renderSchoolList();
        }
    </script>
</body>
</html>